# 股票真实价值走势分析系统

## 🎯 系统概述

这是一个基于多维度估值模型的股票真实价值分析系统，专门为价值投资者设计，能够：

- 📊 **多维度估值**：集成DCF、资源价值、PB-ROE、资产基础等多种估值方法
- 🎯 **价值走向分析**：智能判断价格与价值的偏离程度和趋势方向  
- ⚠️ **预警通知**：实时监控价值偏离，多渠道发送预警通知
- 💡 **投资建议**：基于价值分析提供专业的买卖建议
- 📈 **可视化展示**：交互式仪表板，直观展示分析结果

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                    用户交互层                                │
├─────────────────────────────────────────────────────────────┤
│  📊 Streamlit仪表板  │  🔧 API接口  │  📱 移动端适配        │
├─────────────────────────────────────────────────────────────┤
│                  业务逻辑层                                 │
├─────────────────────────────────────────────────────────────┤
│  🔍 价值分析引擎  │  📈 趋势分析器  │  🚨 预警通知器        │
├─────────────────────────────────────────────────────────────┤
│                  估值模型层                                 │
├─────────────────────────────────────────────────────────────┤
│  💰 DCF模型  │  ⛏️ 资源价值  │  📊 PB-ROE  │  🏢 资产基础  │
├─────────────────────────────────────────────────────────────┤
│                  数据获取层                                 │
├─────────────────────────────────────────────────────────────┤
│  📈 AKShare数据接口  │  💾 SQLite数据库  │  🔄 实时更新        │
└─────────────────────────────────────────────────────────────┘
```

## 📦 核心功能模块

### 1. 多维度估值模型 (`stock_value_analysis_system.py`)

#### **DCF现金流折现模型**
- 基于未来10年自由现金流预测
- 支持自定义增长率、折现率参数
- 提供敏感性分析

#### **资源重置价值模型** 
- 专门针对矿业、石油等资源型公司
- 基于矿产资源储量和当前市场价格
- 考虑开采成本、回收率和时间价值

#### **PB-ROE估值模型**
- 基于净资产收益率的合理市净率计算
- 行业对比和溢价/折价调整
- 适用于资产密集型公司

#### **资产基础估值模型**
- 基于净资产的重置成本估值
- 考虑清算折价因素
- 适用于重资产公司

### 2. 价值走向分析引擎

#### **价值偏离度计算**
```python
偏离度 = (当前价格 - 加权平均价值) / 加权平均价值
```

#### **趋势方向判断**
- **严重高估** (>50%): 🔴 高风险，建议卖出
- **高估** (20%-50%): 🟡 中等风险，谨慎持有  
- **合理估值** (±20%): ⚪ 低风险，持有观望
- **低估** (-20%到-50%): 🟡 机会，考虑买入
- **严重低估** (<-50%): 🟢 绝佳机会，强烈买入

#### **趋势强度评估**
基于偏离度大小、置信度和模型一致性综合判断

### 3. 可视化仪表板 (`value_analysis_dashboard.py`)

#### **概览页面**
- 核心指标卡片展示
- 价值偏离度可视化
- 多维度估值对比图表

#### **详细分析页面**
- 各估值方法详细分析
- 关键假设参数展示
- 模型适用性说明

#### **历史趋势页面**
- 历史价值趋势图表
- 趋势变化统计分析
- 偏离度变化追踪

#### **风险分析页面**
- 整体风险评估
- 价值波动风险因素
- 模型特定风险分析

#### **投资建议页面**
- 核心投资建议
- 具体操作建议
- 时机策略建议
- 风险管理建议

### 4. 预警通知系统 (`value_alert_system.py`)

#### **多渠道通知支持**
- 📧 **邮件通知**: 详细的HTML格式邮件
- 🌐 **Webhook推送**: 支持自定义API接口
- 📱 **短信通知**: 集成第三方SMS服务

#### **智能预警配置**
```yaml
预警类型:
  - overvalued: 高估预警
  - undervalued: 低估预警  
  - deviation: 偏离度预警

阈值设置:
  - 轻度: 20-30%
  - 中度: 30-50% 
  - 重度: >50%
```

#### **冷却时间机制**
避免频繁重复预警，同一类型预警间隔24小时

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install akshare pandas numpy streamlit plotly schedule pyyaml requests
```

### 2. 运行分析系统
```bash
# 运行核心分析系统
python stock_value_analysis_system.py

# 运行可视化仪表板
streamlit run value_analysis_dashboard.py

# 运行预警系统
python value_alert_system.py
```

### 3. 配置预警
编辑 `alert_config.yaml` 文件：
```yaml
email:
  enabled: true
  smtp_server: "smtp.gmail.com"
  username: "your_email@gmail.com"
  password: "your_password"
  to_emails:
    - "recipient@example.com"

webhook:
  enabled: true
  urls:
    - "https://your-webhook-url.com"
```

## 📊 使用示例

### 基础分析
```python
from stock_value_analysis_system import StockValueAnalysisSystem

# 创建系统实例
system = StockValueAnalysisSystem()

# 分析股票
result = system.run_comprehensive_analysis("601899")  # 紫金矿业

# 查看结果
print(f"当前价格: ¥{result['current_price']:.2f}")
print(f"内在价值: ¥{result['weighted_average_value']:.2f}")
print(f"偏离度: {result['value_trend']['deviation']:.1%}")
print(f"投资建议: {result['insights']['summary']}")
```

### 批量分析
```python
# 批量分析股票池
stock_pool = ['601899', '000001', '600519', '000858', '002415']

results = {}
for symbol in stock_pool:
    result = system.run_comprehensive_analysis(symbol)
    results[symbol] = result
    
    # 按价值偏离度排序
    sorted_stocks = sorted(results.items(), 
                          key=lambda x: abs(x[1]['value_trend']['deviation']), 
                          reverse=True)
```

### 预警配置
```python
from value_alert_system import ValueAlertSystem, AlertConfig

# 创建预警系统
alert_system = ValueAlertSystem()

# 添加预警配置
config = AlertConfig(
    symbol="601899",
    alert_type="undervalued", 
    threshold=0.30,  # 30%低估时预警
    email_enabled=True,
    webhook_enabled=True
)

alert_system.add_alert_config(config)

# 启动自动监控
alert_system.start_scheduler()
```

## 🎯 核心特色

### **1. 多维度价值评估**
融合四种主流估值方法，从不同角度评估股票真实价值：
- **现金流视角**：公司未来盈利能力
- **资源视角**：资产重置成本（资源型公司）
- **盈利视角**：净资产收益率
- **资产视角**：净资产价值

### **2. 价值走向智能判断**
基于多模型一致性分析，智能判断：
- 当前价格相对合理价值的偏离程度
- 价值走向的趋势方向（高估/低估/合理）
- 趋势强度和投资建议

### **3. 价值投资导向**
专门为价值投资者设计：
- 长期投资价值评估
- 安全边际分析
- 逆向投资机会识别
- 择时策略建议

### **4. 实时预警监控**
24小时自动监控价值偏离：
- 多渠道通知（邮件/Webhook/短信）
- 智能冷却机制避免重复预警
- 历史预警记录追踪

## 📈 系统优势

### **相比传统估值工具**
1. **多维度融合**: 不是单一模型，而是多模型综合判断
2. **走向分析**: 不仅给出价值，还分析价值走向趋势
3. **实时预警**: 自动监控价值偏离，及时通知投资机会
4. **可视化强**: 交互式仪表板，直观展示分析结果

### **相比技术分析工具**
1. **基本面导向**: 基于公司内在价值，而非价格走势
2. **长期视角**: 适合中长期投资决策
3. **安全边际**: 强调风险控制和安全边际
4. **逆向投资**: 帮助识别市场错误定价机会

## ⚠️ 风险提示

### **模型风险**
- 所有估值模型都基于假设和预测
- 历史数据不能保证未来表现
- 模型参数需要定期校准和更新

### **市场风险**
- 市场可能长期偏离内在价值
- 价值回归时间不确定
- 系统性风险可能影响所有估值

### **使用建议**
1. **多模型验证**: 不要依赖单一估值结果
2. **定期更新**: 及时更新财务数据和假设参数
3. **结合基本面**: 估值分析需要结合基本面研究
4. **控制仓位**: 严格风险控制，分散投资

## 🔮 未来规划

### **短期优化**
- [ ] 增加更多估值模型（EVA、实物期权等）
- [ ] 优化数据获取，提高实时性
- [ ] 增加行业对比功能
- [ ] 移动端APP开发

### **中期扩展**  
- [ ] AI机器学习估值模型
- [ ] 宏观经济因子集成
- [ ] 情绪分析因子
- [ ] 区块链数据验证

### **长期愿景**
- [ ] 全自动价值投资机器人
- [ ] 全球股票市场覆盖
- [ ] 机构级投资管理系统
- [ ] 价值投资社区平台

---

## 📞 联系方式

如有问题或建议，欢迎通过以下方式联系：

- 📧 **邮箱**: [your-email@example.com]
- 💬 **微信**: [your-wechat-id]  
- 🐙 **GitHub**: [your-github-url]

**让我们一起探索价值投资的奥秘！** 🏔️

*投资有风险，入市需谨慎。本系统仅供参考，不构成投资建议。*