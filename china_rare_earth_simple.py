#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ä¸­å›½ç¨€åœŸ(000831)é˜¶æ¢¯åˆ†æAgent - ç®€åŒ–ç‰ˆ
è°ƒç”¨æŒ‡ä»¤ï¼šã€é˜¶æ¢¯åˆ†æå¯åŠ¨ã€‘
"""

def china_rare_earth_analysis():
    """ä¸­å›½ç¨€åœŸé˜¶æ¢¯åˆ†ææ ¸å¿ƒå‡½æ•°"""
    
    # åŸºç¡€æ•°æ®
    base_data = {
        "stock_code": "000831",
        "stock_name": "ä¸­å›½ç¨€åœŸ",
        "current_price": 56.47,
        "market_cap": 600,
        "pe_ratio": 134.0,
        "roe": 3.42,
        "gross_margin": 13.37,
    }
    
    # é˜¶æ¢¯ç³»ç»Ÿ
    tier_system = {
        "æç«¯ä½ä½": {"price_range": [15, 18], "allocation": 35, "logic": "æç«¯ç†Šå¸‚/ç³»ç»Ÿæ€§é£é™©"},
        "æ·±åº¦ä»·å€¼": {"price_range": [18, 21], "allocation": 25, "logic": "æ·±åº¦ä»·å€¼åŒºé—´"},
        "åˆç†åä½": {"price_range": [21, 24], "allocation": 20, "logic": "åˆç†åä½ä¼°å€¼"},
        "è°¨æ…å»ºä»“": {"price_range": [24, 30], "allocation": 15, "logic": "è°¨æ…å»ºä»“åŒºé—´"},
        "è¶‹åŠ¿ç¡®è®¤": {"price_range": [30, 36], "allocation": 5, "logic": "è¶‹åŠ¿ç¡®è®¤åŠ ä»“"},
        "ç›®æ ‡ä½": {"price_range": [36, 42], "allocation": 0, "logic": "åˆ†æ‰¹æ­¢ç›ˆ"},
        "å‡ä»“åŒº": {"price_range": [42, 50], "allocation": -20, "logic": "æ¯æ¶¨5%å‡ä»“20%"},
    }
    
    # ç¡®å®šå½“å‰æ¡£ä½
    current_tier = "è°¨æ…å»ºä»“"  # é»˜è®¤æ¡£ä½ï¼Œå› ä¸º56.47å…ƒåœ¨24-30åŒºé—´
    for tier_name, tier_data in tier_system.items():
        if tier_data["price_range"][0] <= base_data["current_price"] <= tier_data["price_range"][1]:
            current_tier = tier_name
            break
    
    # ç”Ÿæˆåˆ†ææŠ¥å‘Š
    report = f"""
# ğŸ¯ ä¸­å›½ç¨€åœŸï¼ˆ000831ï¼‰é˜¶æ¢¯åˆ†æç³»ç»Ÿ
# è°ƒç”¨æŒ‡ä»¤ï¼šã€é˜¶æ¢¯åˆ†æå¯åŠ¨ã€‘

## ğŸ“Š æ ¸å¿ƒæ•°æ®
- **è‚¡ç¥¨ä»£ç **: {base_data['stock_code']}
- **è‚¡ç¥¨åç§°**: {base_data['stock_name']}
- **å½“å‰ä»·æ ¼**: {base_data['current_price']}å…ƒ
- **å¸‚å€¼**: {base_data['market_cap']}äº¿å…ƒ
- **2025E PE**: {base_data['pe_ratio']}å€
- **ROE**: {base_data['roe']}%
- **æ¯›åˆ©ç‡**: {base_data['gross_margin']}%

## ğŸ—ï¸ å½“å‰æ¡£ä½åˆ†æ
- **æ‰€å¤„æ¡£ä½**: {current_tier}
- **ä»·æ ¼åŒºé—´**: {tier_system[current_tier]['price_range'][0]}-{tier_system[current_tier]['price_range'][1]}å…ƒ
- **ä»“ä½åˆ†é…**: {tier_system[current_tier]['allocation']}%
- **æ“ä½œé€»è¾‘**: {tier_system[current_tier]['logic']}

## ğŸ’ æ ¸å¿ƒæŠ•èµ„é€»è¾‘
**æˆ˜ç•¥åœ°ä½**: ä¸­é‡ç¨€åœŸå”¯ä¸€ä¸Šå¸‚å¹³å°ï¼Œæ”¿ç­–æŠ¤åŸæ²³æœ€æ·±
**æ ¸å¿ƒä¼˜åŠ¿**: 
- æ§åˆ¶å…¨å›½70%+ä¸­é‡ç¨€åœŸé…é¢
- ç¨€åœŸå‡ºå£ç®¡åˆ¶+é…é¢åˆ¶åŒä¿é™©  
- å†›å·¥èˆªå¤©ä¸å¯æ›¿ä»£
**æˆé•¿é©±åŠ¨**:
- æ–°èƒ½æºè½¦éœ€æ±‚çˆ†å‘
- äººå½¢æœºå™¨äººé‡äº§å…ƒå¹´
- é£ç”µæ°¸ç£ç”µæœºæ¸—é€ç‡æå‡

## ğŸ›¡ï¸ é£é™©æ§åˆ¶
- **æ­¢æŸä½**: 36å…ƒï¼ˆæŠ€æœ¯æ”¯æ’‘ä½ï¼‰
- **ç›®æ ‡ä½**: 48-53å…ƒï¼ˆæœºæ„ä¸€è‡´ç›®æ ‡ä»·ï¼‰
- **å½“å‰ç­–ç•¥**: ç­‰å¾…36-42å…ƒåŒºé—´å¸ƒå±€ï¼Œç»ä¸è¿½é«˜
- **ä»“ä½é™åˆ¶**: å•ä¸€æ ‡çš„ä¸è¶…è¿‡æ€»ä»“ä½10%

## âš¡ æ“ä½œå»ºè®®
1. **å½“å‰ï¼ˆ56.47å…ƒï¼‰**: ç»ä¸è¿½é«˜ï¼Œè€å¿ƒç­‰å¾…å›è°ƒ
2. **ä¹°å…¥åŒºé—´**: 36-42å…ƒå¯é‡ä»“å¸ƒå±€
3. **å–å‡ºåŒºé—´**: 48-53å…ƒåˆ†æ‰¹æ­¢ç›ˆ
4. **æ‰§è¡ŒåŸåˆ™**: è€å¿ƒç­‰å¾…æ¯”åŒ†å¿™ä¹°å…¥æ›´é‡è¦

## ğŸ¯ æˆåŠŸæ ‡å‡†
- **6ä¸ªæœˆç›®æ ‡**: 42å…ƒï¼ˆæŠ€æœ¯æ”¯æ’‘ä½ï¼‰
- **12ä¸ªæœˆç›®æ ‡**: 48å…ƒï¼ˆæœºæ„ç›®æ ‡ä»·ä¸‹é™ï¼‰
- **24ä¸ªæœˆç›®æ ‡**: 53å…ƒï¼ˆæœºæ„ç›®æ ‡ä»·ä¸Šé™ï¼‰

## âš ï¸ æ ¸å¿ƒé£é™©
1. **ä¼°å€¼æ³¡æ²«**: å½“å‰PE 134å€ï¼Œå·²é€æ”¯2026å¹´ä¸šç»©
2. **ä»·æ ¼é£é™©**: ç¨€åœŸç°è´§æŒ‡æ•°245ä¸‡/å¨ï¼Œä½äºå…¬å¸å¥—ä¿ä»·
3. **æŠ€æœ¯é«˜ä½**: 56.47å…ƒå¤„äºå†å²é«˜ä½åŒºé—´
4. **éœ€æ±‚è¯ä¼ª**: æ–°èƒ½æºè½¦åº“å­˜63å¤©ï¼Œç£æè®¢å•ç¯æ¯”ä¸‹æ»‘

## ğŸ’¡ ä½¿ç”¨è¯´æ˜
1. æ¯æœˆæ›´æ–°å½“å‰ä»·æ ¼å’Œæ¡£ä½çŠ¶æ€
2. ä¸¥æ ¼æ‰§è¡Œé˜¶æ¢¯ç³»ç»Ÿï¼Œä¸è·³æ¡£æ“ä½œ
3. è®¾ç½®ä»·æ ¼é¢„è­¦ï¼š36å…ƒï¼ˆæ­¢æŸï¼‰ã€42å…ƒï¼ˆé‡ä»“ï¼‰ã€48å…ƒï¼ˆå‡ä»“ï¼‰
4. æ¯æœˆå¤ç›˜ç­–ç•¥æ‰§è¡Œæƒ…å†µ
5. å…³æ³¨ç¨€åœŸç°è´§ä»·æ ¼å’Œæ”¿ç­–å˜åŒ–

"""
    return report.strip()

def main():
    """ä¸»å‡½æ•° - å“åº”ã€é˜¶æ¢¯åˆ†æå¯åŠ¨ã€‘æŒ‡ä»¤"""
    print("ğŸ¯ ä¸­å›½ç¨€åœŸé˜¶æ¢¯åˆ†æç³»ç»Ÿå¯åŠ¨ä¸­...")
    print("=" * 60)
    
    # æ‰§è¡Œåˆ†æ
    report = china_rare_earth_analysis()
    print(report)
    
    print("\n" + "=" * 60)
    print("âœ… åˆ†æå®Œæˆï¼")
    print("ğŸ’¡ æ ¸å¿ƒç»“è®ºï¼šå½“å‰56.47å…ƒåé«˜ï¼Œç­‰å¾…36-42å…ƒåŒºé—´å¸ƒå±€")
    print("ğŸ”‘ ä½¿ç”¨è¯´æ˜ï¼šæ¯æœˆæ›´æ–°ä»·æ ¼æ•°æ®ï¼Œä¸¥æ ¼æ‰§è¡Œé˜¶æ¢¯ç­–ç•¥")

if __name__ == "__main__":
    # å½“æ‰§è¡Œã€é˜¶æ¢¯åˆ†æå¯åŠ¨ã€‘æ—¶è¿è¡Œ
    main()